<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 WIP | Notes and some fun with R</title>
  <meta name="description" content="3 WIP | Notes and some fun with R" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="3 WIP | Notes and some fun with R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 WIP | Notes and some fun with R" />
  
  
  

<meta name="author" content="Lekshmi" />


<meta name="date" content="2020-08-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="trying-some-ode-solvers-in-r.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="trying-some-ode-solvers-in-r.html"><a href="trying-some-ode-solvers-in-r.html"><i class="fa fa-check"></i><b>2</b> Trying some ODE solvers in R</a><ul>
<li class="chapter" data-level="2.1" data-path="trying-some-ode-solvers-in-r.html"><a href="trying-some-ode-solvers-in-r.html#diffeqr-package"><i class="fa fa-check"></i><b>2.1</b> diffeqr package</a></li>
<li class="chapter" data-level="2.2" data-path="trying-some-ode-solvers-in-r.html"><a href="trying-some-ode-solvers-in-r.html#odeintr-package"><i class="fa fa-check"></i><b>2.2</b> odeintr package</a></li>
<li class="chapter" data-level="2.3" data-path="trying-some-ode-solvers-in-r.html"><a href="trying-some-ode-solvers-in-r.html#sundialr-package"><i class="fa fa-check"></i><b>2.3</b> sundialr package</a></li>
<li class="chapter" data-level="2.4" data-path="trying-some-ode-solvers-in-r.html"><a href="trying-some-ode-solvers-in-r.html#some-remarks"><i class="fa fa-check"></i><b>2.4</b> Some remarks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wip.html"><a href="wip.html"><i class="fa fa-check"></i><b>3</b> WIP</a><ul>
<li class="chapter" data-level="3.1" data-path="wip.html"><a href="wip.html#data"><i class="fa fa-check"></i><b>3.1</b> Data</a></li>
<li class="chapter" data-level="3.2" data-path="wip.html"><a href="wip.html#model"><i class="fa fa-check"></i><b>3.2</b> Model</a></li>
<li class="chapter" data-level="3.3" data-path="wip.html"><a href="wip.html#inference"><i class="fa fa-check"></i><b>3.3</b> Inference</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes and some fun with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="wip" class="section level1">
<h1><span class="header-section-number">3</span> WIP</h1>
<p>When I meet other modelers who work in inference, a common suggestion that comes up is to try working with RSTAN and with HMC (Hamilontian Monte Carlo). So it is only fair that I try this out. Let us analyze the COVID counts collected in Switzerland over the past months with an SIR model. I chose this model and data just out of curiosity and as a learning exercise.</p>
<p><strong>DISCLAIMER</strong>: Note that this model has very simple assumptions, and the data collected has many variables that are not accounted for in the model. Also keep in mind the objective of this exercise is not to try out some inference methods on this data and not draw conclusions or suggestions for possible interventions for COVID.</p>
<div id="data" class="section level2">
<h2><span class="header-section-number">3.1</span> Data</h2>
<p>We will download the covid data from Switzerland from the git repo by <em>openZH</em>. We will specifically look at the data from the canton Basel, because I live here. We plot the data with respect to the first data point.</p>
<pre><code>##         date  time abbreviation_canton_and_fl ncumul_tested ncumul_conf ncumul_hosp ncumul_ICU ncumul_vent ncumul_released
## 1 2020-02-27 19:17                         BS            NA           1          NA         NA          NA              NA
## 2 2020-02-28 10:15                         BS            NA           1          NA         NA          NA              NA
## 3 2020-02-29 15:23                         BS            NA           1          NA         NA          NA              NA
## 4 2020-03-01 17:29                         BS            NA           1          NA         NA          NA              NA
## 5 2020-03-02 17:15                         BS           235           1          NA         NA          NA              NA
## 6 2020-03-03 17:30                         BS            NA           3          NA         NA          NA              NA
##   ncumul_deceased
## 1              NA
## 2              NA
## 3              NA
## 4              NA
## 5              NA
## 6              NA
##                                                                                                                                            source
## 1 https://www.coronavirus.bs.ch/nm/2020-coronavirus-erster-positiver-fall-in-basel-stadt-zweiter-positiv-getesteter-ausserkantonaler-fall-gd.html
## 2                                                                                 https://twitter.com/BR_Sprecher/status/1233316679863631873?s=20
## 3                                                                               https://twitter.com/BAG_OFSP_UFSP/status/1233759578241863681?s=20
## 4                            https://www.coronavirus.bs.ch/nm/2020-coronavirus-anzahl-der-getesteten-faelle-und-zwischenstand-kita-riehen-gd.html
## 5                                              https://www.coronavirus.bs.ch/nm/2020-coronavirus-zwei-neue-positive-faelle-in-basel-stadt-gd.html
## 6                                                                               https://twitter.com/BAG_OFSP_UFSP/status/1234880556095213569?s=20
##   ncumul_confirmed_non_resident current_hosp_non_resident current_quarantined_riskareatravel current_quarantined_total
## 1                             1                        NA                                 NA                        NA
## 2                             1                        NA                                 NA                        NA
## 3                             1                        NA                                 NA                        NA
## 4                             1                        NA                                 NA                        NA
## 5                             3                        NA                                 NA                        NA
## 6                             3                        NA                                 NA                        NA
##   diff_tested current_hosp_resident
## 1          NA                    NA
## 2          NA                    NA
## 3          NA                    NA
## 4          NA                    NA
## 5          NA                    NA
## 6          NA                    NA</code></pre>
<pre><code>## Don&#39;t know how to automatically pick scale for object of type difftime. Defaulting to continuous.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Rather than plotting the cumulative cases, we may be interested to look at the confirmed cases on days we obtained data. To visualize the trend, we also fit a generalized additive model model using an assumption that the likelihood of the data can be described with a Poisson distribution (with a log link function).</p>
<pre><code>## Don&#39;t know how to automatically pick scale for object of type difftime. Defaulting to continuous.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="model" class="section level2">
<h2><span class="header-section-number">3.2</span> Model</h2>
</div>
<div id="inference" class="section level2">
<h2><span class="header-section-number">3.3</span> Inference</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="trying-some-ode-solvers-in-r.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
